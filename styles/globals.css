@import "tailwindcss";

@plugin "tailwindcss-radix";
@plugin "@tailwindcss/typography";

@theme {
  /* Tailwind default color tokens - these reference Tailwind's built-in colors */
  --color-white: #ffffff; /* Tailwind's default white */
  --color-neutral-900: #171717; /* Tailwind's default neutral-900 */
}

/* Custom fonts */
@font-face {
  font-family: "Inter";
  src: url("/fonts/inter/Inter-VariableFont_opsz,wght.ttf") format("truetype");
  font-weight: 100 900;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: "Inter";
  src: url("/fonts/inter/Inter-Italic-VariableFont_opsz,wght.ttf")
    format("truetype");
  font-weight: 100 900;
  font-style: italic;
  font-display: swap;
}

@font-face {
  font-family: "DM Sans";
  src: url("/fonts/dm-sans/DMSans-VariableFont_opsz,wght.ttf")
    format("truetype");
  font-weight: 100 900;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: "DM Sans";
  src: url("/fonts/dm-sans/DMSans-Italic-VariableFont_opsz,wght.ttf")
    format("truetype");
  font-weight: 100 900;
  font-style: italic;
  font-display: swap;
}

:root {
  color-scheme: light;

  /* Base sizing & typography */
  --font-size-root: 16px;
  font-size: var(--font-size-root);
  --font-size-body: 0.875rem; /* matches Tailwind text-sm */
  --font-size-small: 0.8rem; /* labels, skip link */
  --font-size-code: 0.78rem;
  --line-height-body: 1.625; /* matches Tailwind leading-relaxed */

  /* Shadows */
  --shadow-page-card: 0 18px 60px rgba(15, 23, 42, 0.9);
  --shadow-skip-link: 0 18px 40px rgba(15, 23, 42, 0.7);

  /* Motion / transitions */
  --transition-fast: 150ms;
  --transition-impact-in: 500ms;
  --transition-impact-out: 140ms;

  /* Backgrounds (light theme) */
  --bg-app: #f8fafc; /* slate-50 */
  --bg-surface: #ffffff;
  --bg-elevated: #e5e7eb; /* gray-200 */
  --bg-muted: #e5e7eb;
  --surface-subtle: #fef2f2; /* subtle accent-tinted surface */

  /* Card glass backgrounds (light theme) */
  --card-bg-from: rgba(255, 255, 255, 0.92);
  --card-bg-to: rgba(248, 250, 252, 0.78);
  --card-border: rgba(148, 163, 184, 0.55);
  --card-highlight: rgba(255, 255, 255, 0.7);

  /* Background gradients (light theme) */
  --bg-gradient-top: radial-gradient(
    circle at top,
    rgba(37, 99, 235, 0.14),
    transparent 55%
  );
  --bg-gradient-bottom: radial-gradient(
    circle at bottom,
    rgba(59, 130, 246, 0.12),
    transparent 55%
  );

  /* Text colors (light theme) */
  --text-primary: #05070a; /* slate-950 */
  --text-muted: #374151; /* slate-700 - stronger contrast for labels/help text */

  /* Accent colors (light theme)
     Chosen to meet WCAG contrast requirements against the light background. */
  --accent: #b91c1c; /* deep red */
  --accent-hover: #7f1d1d; /* darker red for hover */
  --accent-soft: #fecaca; /* muted accent (brighter) for subtle states */

  --secondary: #2563eb;
  --secondary-muted: #dbeafe;

  /* Link colors (light theme) */
  /* Use a deep red that passes WCAG contrast on white while still feeling punchy. */
  --link: #b91c1c; /* deep red for links */
  --link-hover: #7f1d1d; /* darker red on hover */

  /* Form placeholders & code */
  --placeholder-color: #6b7280; /* slate-500 - higher contrast than default placeholder */
  --code-bg: rgba(15, 23, 42, 0.7); /* slate-900/70 */
  --code-text: #f9fafb; /* slate-50 */

  /* Borders (light theme) */
  --border-subtle: #e2e8f0; /* slate-200 */
  --border-strong: rgba(107, 114, 128, 0.9);
}

:root.dark {
  color-scheme: dark;

  /* Backgrounds (dark theme) */
  --bg-app: #05070a; /* slate-950 */
  --bg-surface: #05070a;
  --bg-elevated: #05070a;
  --bg-muted: #05070a;
  --surface-subtle: #0f172a; /* subtle lifted surface for accent hovers */

  /* Card glass backgrounds (dark theme) */
  --card-bg-from: rgba(15, 23, 42, 0.88);
  --card-bg-to: rgba(15, 23, 42, 0.7);
  --card-border: rgba(148, 163, 184, 0.4);
  --card-highlight: rgba(255, 255, 255, 0.06);

  /* Text colors (dark theme) */
  --text-primary: #f9fafb; /* slate-50 */
  --text-muted: #9ca3af; /* gray-400 */

  --secondary: #60a5fa;
  --secondary-muted: #1d4ed8;

  /* Accent colors (dark theme) */
  --accent: #ff4040; /* vivid red for dark background */
  --accent-hover: #ff1f1f; /* deeper red for hover */
  --accent-soft: #7f1d1d; /* subtle red for borders/backgrounds */

  /* Link colors (dark theme) */
  --link: var(--accent);
  --link-hover: var(--accent-hover);

  /* Borders (dark theme) */
  --border-subtle: rgba(148, 163, 184, 0.3);
  --border-strong: rgba(148, 163, 184, 0.6);
}

html {
  scroll-behavior: smooth;
}

body {
  @apply min-h-screen antialiased;
  background-color: var(--bg-app);
  color: var(--text-primary);
  font-family:
    "Inter",
    system-ui,
    -apple-system,
    BlinkMacSystemFont,
    "Segoe UI",
    sans-serif;
  background-image: var(--bg-gradient-top), var(--bg-gradient-bottom);
  background-attachment: fixed;
}

@layer components {
  .shell {
    @apply mx-auto w-full max-w-4xl px-4;
  }

  /* ======================================================
     Base Glass Card (NO blur yet â€” SSR & Safari safe)
     ====================================================== */
  .glass-card {
    /* Use a single, token-driven radius so outer/inner corners match */
    @apply relative z-0 overflow-hidden bg-white/80 dark:bg-neutral-900/80 border border-black/5 dark:border-white/10 shadow-[0_8px_24px_rgba(0,0,0,0.08)];
    border-radius: var(--radius-2xl);
    contain: paint;
    transition: none;
  }

  .glass-card-inner {
    position: relative;
    z-index: 1;
    border-radius: inherit;
    overflow: hidden; /* ensure children respect the inherited radius */
    background-color: var(--bg-surface);
  }

  /* ======================================================
     Progressive Enhancement: Backdrop Blur
     ====================================================== */
  @supports (
    (-webkit-backdrop-filter: blur(1px)) or (backdrop-filter: blur(1px))
  ) {
    .glass-card {
      background-color: rgba(255, 255, 255, 0.15);
      -webkit-backdrop-filter: blur(18px) saturate(150%);
      backdrop-filter: blur(18px) saturate(150%);
      border-color: rgba(255, 255, 255, 0.3);
    }

    .dark .glass-card {
      background-color: rgba(20, 24, 36, 0.6);
      border-color: rgba(255, 255, 255, 0.07);
      box-shadow: 0 12px 32px rgba(0, 0, 0, 0.45);
    }
  }

  /* ======================================================
     iOS-style Light Gradient Tint
     ====================================================== */
  .glass-card::before {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: inherit;
    pointer-events: none;
    background: linear-gradient(
      180deg,
      rgba(255, 255, 255, 0.16),
      rgba(255, 255, 255, 0.02)
    );
  }

  .dark .glass-card::before {
    background: linear-gradient(
      180deg,
      rgba(0, 8, 20, 0.5),
      rgba(0, 8, 20, 0.05)
    );
  }

  /* No hover lift; glass should feel stable */
  /* .glass-card:hover {
    transform: none;
    box-shadow: inherit;
  } */

  /* ======================================================
     Accessibility & Performance Guards
     ====================================================== */
  @media (prefers-reduced-motion: reduce) {
    .glass-card {
      transition: none;
    }
  }

  @media (prefers-reduced-transparency: reduce) {
    .glass-card {
      -webkit-backdrop-filter: none !important;
      backdrop-filter: none !important;
      background-color: var(--color-white);
    }

    .dark .glass-card {
      background-color: var(--color-neutral-900);
    }

    .glass-card::before {
      display: none;
    }
  }

  /* Optional thickness modifiers */
  .glass-thin {
    -webkit-backdrop-filter: blur(12px);
    backdrop-filter: blur(12px);
    background-color: rgba(255, 255, 255, 0.1);
  }

  .glass-thick {
    -webkit-backdrop-filter: blur(28px);
    backdrop-filter: blur(28px);
    background-color: rgba(255, 255, 255, 0.25);
  }

  .btn-primary {
    @apply inline-flex items-center justify-center cursor-pointer select-none rounded-full px-4 py-2 text-xs font-semibold shadow-sm;
    border: 1px solid var(--accent);
    background-color: var(--accent);
    color: #f9fafb;
    box-shadow: 0 4px 10px rgba(15, 23, 42, 0.35);
    transition:
      background-color var(--transition-fast) ease,
      border-color var(--transition-fast) ease,
      color var(--transition-fast) ease;
  }

  .btn-primary:hover:not(:disabled) {
    background-color: var(--accent-hover);
    border-color: var(--accent-hover);
  }

  .btn-primary:active:not(:disabled) {
    background-color: var(--accent-hover);
    border-color: var(--accent-hover);
  }

  .btn-outline {
    @apply inline-flex items-center justify-center cursor-pointer select-none rounded-full border px-4 py-2 text-xs font-semibold shadow-sm;
    border-color: var(--border-subtle);
    background-color: var(--bg-surface);
    color: var(--text-primary);
    transition:
      background-color var(--transition-fast) ease,
      border-color var(--transition-fast) ease,
      color var(--transition-fast) ease;
  }

  .btn-outline:hover:not(:disabled) {
    background-color: var(--surface-subtle);
    border-color: var(--border-strong);
  }

  .btn-outline:active:not(:disabled) {
    background-color: var(--bg-surface);
    border-color: var(--border-subtle);
  }

  .page-card {
    /* Do not override radius here; inherit from .glass-card via .glass-card-inner */
    @apply p-6 sm:p-8;
  }

  .section-card {
    @apply rounded-2xl p-4 sm:p-6;
  }

  .skip-link {
    position: absolute;
    top: 1.25rem;
    left: 0.75rem;
    padding: 0.5rem 1rem;
    border-radius: 9999px;
    background-color: var(--bg-surface);
    color: var(--text-primary);
    font-size: var(--font-size-small);
    font-weight: 500;
    transform: translateY(-140%);
    opacity: 0;
    pointer-events: none;
    transition:
      transform var(--transition-fast) ease,
      opacity var(--transition-fast) ease,
      box-shadow var(--transition-fast) ease;
    box-shadow: var(--shadow-skip-link);
    z-index: 100;
  }

  .skip-link:focus-visible {
    transform: translateY(0);
    opacity: 1;
    pointer-events: auto;
    outline: 2px solid var(--accent);
    outline-offset: 2px;
  }

  /* Subtle animation + glass chrome for Home page impact cards (root /) */
  .impact-card {
    will-change: opacity, transform;
  }

  .impact-card--in {
    animation: impact-card-fade-in var(--transition-impact-in) ease-out forwards;
  }

  .impact-card--out {
    animation: impact-card-fade-out var(--transition-impact-out) ease-out
      forwards;
  }
}

@keyframes impact-card-fade-in {
  from {
    opacity: 0;
    transform: translateY(4px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes impact-card-fade-out {
  from {
    opacity: 1;
    transform: translateY(0);
  }

  to {
    opacity: 0;
    transform: translateY(2px);
  }
}

@layer base {
  /* Global link styles */
  a {
    color: var(--link);
    text-decoration-line: underline;
    text-underline-offset: 0.15em;
    transition: color var(--transition-fast) ease;
  }

  a:hover {
    color: var(--link-hover);
  }

  /* Headings */
  h1 {
    @apply text-4xl md:text-5xl font-semibold tracking-tight;
    font-family:
      "DM Sans",
      system-ui,
      -apple-system,
      BlinkMacSystemFont,
      "Segoe UI",
      sans-serif;
  }

  h2 {
    @apply text-3xl md:text-4xl font-semibold tracking-tight;
    font-family:
      "DM Sans",
      system-ui,
      -apple-system,
      BlinkMacSystemFont,
      "Segoe UI",
      sans-serif;
  }

  h3 {
    @apply text-xl font-semibold;
    font-family:
      "DM Sans",
      system-ui,
      -apple-system,
      BlinkMacSystemFont,
      "Segoe UI",
      sans-serif;
    color: var(--text-primary);
  }

  h4 {
    @apply text-xl font-semibold;
    font-family:
      "DM Sans",
      system-ui,
      -apple-system,
      BlinkMacSystemFont,
      "Segoe UI",
      sans-serif;
  }

  h5 {
    @apply text-lg font-semibold;
    font-family:
      "DM Sans",
      system-ui,
      -apple-system,
      BlinkMacSystemFont,
      "Segoe UI",
      sans-serif;
  }

  h6 {
    @apply text-base font-semibold tracking-wide text-slate-400;
    font-family:
      "DM Sans",
      system-ui,
      -apple-system,
      BlinkMacSystemFont,
      "Segoe UI",
      sans-serif;
  }

  /* CV summary heading tweaks */
  #summary h2,
  #summary h3 {
    @apply text-lg md:text-xl;
  }

  /* Body text */
  p {
    @apply text-sm leading-relaxed;
    color: var(--text-primary);
    font-size: var(--font-size-body);
    line-height: var(--line-height-body);
  }

  /* Lists */
  ul,
  ol {
    @apply text-sm leading-relaxed;
    color: var(--text-primary);
    font-size: var(--font-size-body);
    line-height: var(--line-height-body);
  }

  /* List markers */
  ul li::marker,
  ol li::marker {
    color: var(--secondary);
  }

  /* Form placeholders */
  input::placeholder,
  textarea::placeholder {
    color: var(--placeholder-color);
  }

  /* Inline code */
  code {
    @apply rounded-sm px-1 py-0.5 font-mono;
    font-size: var(--font-size-code);
    background-color: var(--code-bg);
    color: var(--code-text);
  }

  /* Cloudflare Turnstile widget */
  .cf-turnstile iframe {
    width: 100% !important;
  }
}
